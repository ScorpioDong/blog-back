<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.scorpiodong.blog.dao.SortDao">

    <resultMap type="cn.scorpiodong.blog.entity.Sort" id="SortMap">
        <result property="id" column="id" jdbcType="INTEGER"/>
        <result property="name" column="name" jdbcType="VARCHAR"/>
        <result property="description" column="description" jdbcType="VARCHAR"/>
        <collection property="blogs" ofType="cn.scorpiodong.blog.entity.Blog">
            <result property="id" column="blog_id" jdbcType="INTEGER"/>
            <result property="title" column="blog_title" jdbcType="VARCHAR"/>
            <result property="description" column="blog_description" jdbcType="VARCHAR"/>
            <result property="cover" column="blog_cover" jdbcType="VARCHAR"/>
            <result property="createTime" column="blog_create_time" jdbcType="TIMESTAMP"/>
            <result property="updateTime" column="blog_update_time" jdbcType="TIMESTAMP"/>
        </collection>
    </resultMap>

    <select id="selectDetail" resultMap="SortMap" parameterType="INTEGER">
        select s.id,
               s.name,
               s.description,
               b.id          as blog_id,
               b.title       as blog_title,
               b.description as blog_description,
               b.cover       as blog_cover,
               b.create_time as blog_create_time,
               b.update_time as blog_update_time
        from sort s
                 left join blog b on s.id = b.sort_id
        where s.id = #{id}
    </select>

</mapper>